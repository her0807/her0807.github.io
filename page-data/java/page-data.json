{"componentChunkName":"component---src-templates-blog-template-js","path":"/java/","result":{"data":{"cur":{"id":"676bd790-8562-55ce-b5b1-2b515f1fae85","html":"<h2 id=\"학습-동기\" style=\"position:relative;\"><a href=\"#%ED%95%99%EC%8A%B5-%EB%8F%99%EA%B8%B0\" aria-label=\"학습 동기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>학습 동기</h2>\n<p>중복되지 않는 값을 가진 데이터를 빠르게 조회하고 싶었어요. 그리고 그 값에 대한 개수를 세고 그 개수에 대한 로직을 작성하고자 했습니다. 그러던 중 해시 함수를 이용해서 테이블에 데이터 Key - value 형식으로 저장하는 HashMap 이 떠올랐어요. HashMap 내부는 Hash table 로 구현되어 있기 때문에 Hash table 에 대해서 먼저 알아보면 좋을 것 같습니다.</p>\n<h2 id=\"hashtable\" style=\"position:relative;\"><a href=\"#hashtable\" aria-label=\"hashtable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HashTable</h2>\n<p>해시 테이블은 연관배열 구조를 이용해서 키(key) 에 결과값에 (value) 를 저장하는 자료 구조 입니다!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADtElEQVQ4y1WTa0ybZRiGv7ZfC20oPXwtyBywtpg598eU6IaJc6LLMAZkjCGDLUT3h8SIJiwcy6EbB0VmHIhDYARRFw6Jc0PnRiSExQwo3WjLADksDhcDIi4qhPnvMv04ZP64cr/Pnfd58iTv/QpmsxmTyfQ/tjyj0SjzuLd13qolSSIiIoLIyEjZEx6/sHVJVrOZcIOBcEM4ZsmMWZJkX7JI8hCLxbLNlhfslQeGhYXJGAwGuSm4VYioQa1QoVaqEBUqwvV6uSE0VItWq0WpVKJUbKBQKFCr1XKfYLJYMEoShuBWwS2sVowmM/uSDpKUk86h7FQO5xzF9vRTREZGkJR8mJcSD5B6NJW0jDSOHDsia2p6KtHR0QhmUURSqzfQaJBEEYNGQ21/JzeY55u/fdzgHi9nJhNntzMwdpP23g4mlieYW51n5q8Z5lfnCSwFiH8+HkF/4gT6rCz0x4+jz8xEn5NDWEIC7t5GLq9N0P37KL0rXl5ISWRHpJ2Gj3+m6JMWqifdfDRdz1nvWdwjbupn69mTsAdBeX8B5ewsyoUFRJ8Pxfo6mgsXKGlwcWl5jObA97TPDvBi2iGiImzUVE7xXt1nlE4XUD5VgXveTfF4MZVzlexO2I1gjI3FZLdjcjg2iIvDYLFS9V0bPStemgPX6PljTB64M8pGU9MYroYLNM000DzzOS33Wmj0N8q6d/9ehJCLFwltaCD0/Hm0584R2tGB7q23KWmt5uvFEXqWPfQ9muTgsddx2Hbxw3AfzZ1NjM+OM/VgiolfJpj+bZo7M3dwxjsRxFu3UPf1ob5+Hc3Vq4jj44SUl1PWWsWVf6fpWhrh8mqAV7PeQBeixeZwsDMmmhhbDLH22G0NEsykIOl0SAYDkl4vYwkLw6jRUHWtnb5HU3QtjXJlbYLEzGQiJIl3TueSeTKD/KJ8Cl2FFJQWyJpfmI/dYUdQjfsQh4YQPR7EwUFUc3OE1NTiaj5D18ptvnrwE9+uBjiQ/hoOm4Oh237aer/E++cYk+uT+P/xc3ftLt4VL879TgRtbS26khJ0bje6igq0dXXoMt6krONDule8tE3303n/phybJ6w2aiqmyPvgUwr9+ZT6XBSMFJA3kEfl7OYrSyoV5s1Ay+EOBlsUqRu8xAC/yg/yIwu8kpWCfZeN/uFhWru/wLM4iv+hH99Dn6yeRQ/OfU4Ek9VK8Ptts/n1UnKzya0v4VT1aVmfee5ZntwRxfvF73LyVDZFZUW4zrgorSyVNVg74hz8BwtUcTic5pBHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hashtable.png\"\n        title=\"hashtable.png\"\n        src=\"/static/9cd1732a8c9f7bac2528771cf2eb118b/37523/hashtable.png\"\n        srcset=\"/static/9cd1732a8c9f7bac2528771cf2eb118b/e9ff0/hashtable.png 180w,\n/static/9cd1732a8c9f7bac2528771cf2eb118b/f21e7/hashtable.png 360w,\n/static/9cd1732a8c9f7bac2528771cf2eb118b/37523/hashtable.png 720w,\n/static/9cd1732a8c9f7bac2528771cf2eb118b/302a4/hashtable.png 1080w,\n/static/9cd1732a8c9f7bac2528771cf2eb118b/1e093/hashtable.png 1376w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"저장-시간-복잡도\" style=\"position:relative;\"><a href=\"#%EC%A0%80%EC%9E%A5-%EC%8B%9C%EA%B0%84-%EB%B3%B5%EC%9E%A1%EB%8F%84\" aria-label=\"저장 시간 복잡도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>저장 시간 복잡도</h3>\n<p>데이터가 입력되면 해당 해시함수 로직을 통해서 고유 번호(해시값)가 나오게 되고, 그 고유번호를 key 로 가지고, 실제 데이터(value) 를 slot 이라고 부르는 공간에 넣게 돼요. 그래서 최단 시간 복잡도는 O(1) 이고, 만일 충돌이 발생하게 되면  최대 O(n) 의 시간이 걸릴 수도 있어요.😭</p>\n<h3 id=\"충돌이-발생하는-경우\" style=\"position:relative;\"><a href=\"#%EC%B6%A9%EB%8F%8C%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0\" aria-label=\"충돌이 발생하는 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>충돌이 발생하는 경우</h3>\n<ul>\n<li>\n<p>key 값이 같고, value 가 다른 경우\n(HashMap 기준으로 설명)\n이 경우는 key 값이 있는 슬롯을 찾아서 가장 먼저 실제 key 데이터가 같은지 확인하고 같다면 value 를 업데이트 해줘요. 그래서 key 가 고유함을 보장할 수 있어요.</p>\n</li>\n<li>\n<p>key 값이 다른 경우\n해쉬함수를 사용해서 해쉬를 만들경우 key 값이 다르지만, 동일한 해쉬가 나올 경우도 있어요. 그럴 때 해결 방법이 2가지 있습니다.</p>\n<ul>\n<li>\n<p><strong>개방 주소법(Open Addressing)</strong></p>\n<p>충돌 난 다음 슬롯에 저장하기, 제곱만큼 건너 뛴 슬롯에 저장하기, 다른 해시 함수를 한번 더 적용한 겨로가를 저장하기 방식이 있습니다.</p>\n<ul>\n<li>지정한 메모리 외에 추가적인 공간이 필요 없고, 삭제시 오버헤드가 적어요!, 최악 일 때는 데이터를 찾지 못할 수도 있고, 특정 위치에 데이터가 몰릴 수도 있습니다.</li>\n</ul>\n</li>\n<li>\n<p><strong>체이닝(Close Addressing)</strong></p>\n<p>각각의 버킷을 연결 리스트를 사용하여 만들어 데이터를 연결하는 방식이 있어요.</p>\n<ul>\n<li>삽입, 삭제가 간단해요!</li>\n<li>추가적인 메모리를 사용해요 (데이터 크기가 작다면, 적은 데이터를 사용할 때 메모리 낭비가 심해요)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"조회-시간-복잡도\" style=\"position:relative;\"><a href=\"#%EC%A1%B0%ED%9A%8C-%EC%8B%9C%EA%B0%84-%EB%B3%B5%EC%9E%A1%EB%8F%84\" aria-label=\"조회 시간 복잡도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>조회 시간 복잡도</h3>\n<p>key 를 해시함수를 사용해서 데이터를 변환한 뒤에 해당 슬롯으로 바로 접근하면 value 를 찾을 수 있어요!  최단 시간은 <strong>O(1) 의 시간 복잡도를 가지게 됩니다.</strong> 만약 충돌이 발생해서 다른 위치에 저장되어 있다면 <strong>최대 O(n)</strong> 까지의 시간 복잡도를 가질 수도 있어요. (삽입시와 유사한 알고리즘을 가지고 있습니다! )</p>\n<h2 id=\"hash-map-vs-hash-set\" style=\"position:relative;\"><a href=\"#hash-map-vs-hash-set\" aria-label=\"hash map vs hash set permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hash Map vs Hash Set</h2>\n<p>우선 HashMap 과 HashSet 모두 HashTable 을 기반으로한 동작 원리를 가지고 있어요. 간단한 차이는Set 은 value 에 값 하나만 있지만,  Map 은  데이터에도 key- value 를 가지고 있다는 점입니다.</p>\n<h3 id=\"hash-set-내부-구현이-hash-map--이라고\" style=\"position:relative;\"><a href=\"#hash-set-%EB%82%B4%EB%B6%80-%EA%B5%AC%ED%98%84%EC%9D%B4-hash-map--%EC%9D%B4%EB%9D%BC%EA%B3%A0\" aria-label=\"hash set 내부 구현이 hash map  이라고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hash Set 내부 구현이 Hash Map  이라고?</h3>\n<p>동작원리가 궁금해져 코드를 직접 살펴봤더니 HashSet 이 HashMap 을 통해 생성되어 있었습니다.</p>\n<p>왜그럴까요?</p>\n<p>제 생각에는 HashSet 또한 중복값을 허용하면 안되기 때문에 값에 대한 내역을 효율적으로 관리하고 싶었던 것 같습니다.</p>\n<p>그래서 삽입시 공통 값인 Present 를 넣어두고 삭제 시에 반환되는 값이 Present 이면 정상적으로 삭제 되었다고 판단하는 형태의 로직을 구현해두었던 것 같아요. 기존 로직을 재활용한  좋은 사례인 것 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">HashSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">E</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">return</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">,</span> <span class=\"token constant\">PRESENT</span><span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">Iterator</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">keySet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> o<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> map<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token constant\">PRESENT</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"언제-hashmap-을-사용하면-좋을까요\" style=\"position:relative;\"><a href=\"#%EC%96%B8%EC%A0%9C-hashmap-%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%A9%B4-%EC%A2%8B%EC%9D%84%EA%B9%8C%EC%9A%94\" aria-label=\"언제 hashmap 을 사용하면 좋을까요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>언제 HashMap 을 사용하면 좋을까요?</h2>\n<ul>\n<li>\n<p>영화 제목 - 가격처럼 <code class=\"language-text\">key - value 관리가 필요할 때</code></p>\n<p>중복이 제거되고, 최소 O(1) 의 시간 복잡도를 가지고 있기 때문에 효율적인 구현이 가능해요</p>\n</li>\n<li>\n<p>영화 제목 - 누적 관람객 수처럼 <code class=\"language-text\">특정 데이터에 대한 count 가 필요할 때</code></p>\n<p>해당 객체에 바로 접근이 가능해서 연산 작업을 하기 수월해요.</p>\n</li>\n</ul>\n<h3 id=\"유용한-메서드-code-classlanguage-textgetordefaultcode\" style=\"position:relative;\"><a href=\"#%EC%9C%A0%EC%9A%A9%ED%95%9C-%EB%A9%94%EC%84%9C%EB%93%9C-code-classlanguage-textgetordefaultcode\" aria-label=\"유용한 메서드 code classlanguage textgetordefaultcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>유용한 메서드 <code class=\"language-text\">getOrDefault</code></h3>\n<p>만약 count 를 하고 싶다면? 동일한 key 값에 데이터가 있으면 그 데이터 +1 을 해야하고, 그렇지 않으면 기본 값인 1 을 넣어줘야할 거예요. 그럴 기본 값을 설정할 수 있는 getOrDefault 메서드가 있어요!</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">default</span> <span class=\"token class-name\">V</span> <span class=\"token function\">getOrDefault</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">V</span> defaultValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">V</span> v<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>v <span class=\"token operator\">=</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">containsKey</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token operator\">?</span> v\n            <span class=\"token operator\">:</span> defaultValue<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"느낀점\" style=\"position:relative;\"><a href=\"#%EB%8A%90%EB%82%80%EC%A0%90\" aria-label=\"느낀점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>느낀점</h2>\n<p>해시는 중복을 줄이고, 데이터를 최대한 빠르게 탐색하기 적합한 자료구조라는 것을 알았어요. JAVA 에서 이런 문제를 해결하기 위한 고민들이 있었다는 사실이 너무 재밌었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li><a href=\"https://javannspring.tistory.com/238\">해시 충돌</a></li>\n<li><a href=\"https://www.blog.ecsimsw.com/entry/%EC%9E%91%EC%84%B1-%EC%A4%91-%EC%9E%90%EB%B0%94-HashSet%EC%9D%98-%EC%9B%90%EB%A6%AC\">hashSet 동작 원리</a></li>\n<li>java 실제 코드</li>\n<li><a href=\"https://velog.io/@cyranocoding/Hash-Hashing-Hash-Table%ED%95%B4%EC%8B%9C-%ED%95%B4%EC%8B%B1-%ED%95%B4%EC%8B%9C%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0%EC%9D%98-%EC%9D%B4%ED%95%B4-6ijyonph6o\">Hash, Hashing, Hash Table(해시, 해싱 해시테이블) 자료구조의 이해</a></li>\n</ul>","excerpt":"학습 동기 중복되지 않는 값을 가진 데이터를 빠르게 조회하고 싶었어요. 그리고 그 값에 대한 개수를 세고 그 개수에 대한 로직을 작성하고자 했습니다. 그러던 중 해시 함수를 이용해서 테이블에 데이터 Key - value 형식으로 저장하는 HashMap 이 떠올랐어요. HashMap 내부는 Hash table 로 구현되어 있기 때문에 Hash table 에 대해서 먼저 알아보면 좋을 것 같습니다. HashTable 해시 테이블은 연관배열 구조를 이용해서 키(key) 에 결과값에 (value) 를 저장하는 자료 구조 입니다!  저장 시간 복잡도 데이터가 입력되면 해당 해시함수 로직을 통해서 고유 번호(해시값)가 나오게 되고, 그 고유번호를 key 로 가지고, 실제 데이터(value) 를 slot 이라고 부르는 공간에 넣게 돼요. 그래서 최단 시간 복잡도는 O(1) 이고, 만일 충돌이 발생하게 되면  최대 O(n) 의 시간이 걸릴 수도 있어요.😭 충돌이 발생하는 경우 key 값이 같고,…","frontmatter":{"date":"December 14, 2022","title":"Hash table, HashMap, HashSet","categories":"java","author":"수달","emoji":"🙂"},"fields":{"slug":"/java/"}},"next":{"id":"8117a01a-1fdd-5491-9134-0b8754feca76","html":"<h2 id=\"학습-동기\" style=\"position:relative;\"><a href=\"#%ED%95%99%EC%8A%B5-%EB%8F%99%EA%B8%B0\" aria-label=\"학습 동기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>학습 동기</h2>\n<p>프로그램 내부에서 예외가 발생했을 때, 진행되고 있던 데이터 변경 사항들을 모두 성공시키거나 실패시켜야 할 필요성을 느꼈어요.</p>\n<p>면담 예약 서비스로 예를 든다면  면담을 예약하기 위해서는 1) 멘토의 시간도 사용중으로 바꿔야하고, 2)면담 요청 내용도 저장해야하고, 3)면담 테이블에 면담도 생성해야하는 3가지 DB 변경 작업이 필요해요. 세가지 중 하나라도 정상적으로 실행이 안되면 진행된 내역을 전부 취소 시켜서 프로그램 오류를 막는것이 안전한 서비스겠죠?</p>\n<h2 id=\"트랜잭션\" style=\"position:relative;\"><a href=\"#%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98\" aria-label=\"트랜잭션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>트랜잭션</h2>\n<p>더이상 나눌 수 없는 작업 단위를 말합니다. <strong>데이터의 정합성을 보장하기 위한 작업이기도 해요.</strong>  위에서 면담을 생성하기 위해서 해야하는 3가지는 반드시 필요한 작업이라 하나의 트랜잭션에 묶이듯이요!  이 트랜잭션을 통해서 지키고 싶은 특징이 4가지가 있어요.  각 영단어에 앞 글자를 따서 ACID 원칙이라고도 불려요</p>\n<h3 id=\"원자성atomicity\" style=\"position:relative;\"><a href=\"#%EC%9B%90%EC%9E%90%EC%84%B1atomicity\" aria-label=\"원자성atomicity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>원자성(Atomicity)</h3>\n<blockquote>\n<p>작업이 하나의 쿼리로 실행되더라도, 해당 쿼리로 바뀌는 데이터가 1개 이상이라면 그 데이터가 모두 정상적으로 동작했을 때만 변경 사항이 저장되는 특징을 말해요. 모두  성공하거나 모두 실패하거나 all or nothing 이라고도 표현합니다!</p>\n</blockquote>\n<p><strong>1) Commit 연산</strong></p>\n<ul>\n<li>트랜잭션에 대한 작업이 성공적으로 끝났을 때 수행</li>\n<li>트랜잭션이 행한 갱신 연산이 완료된 것을 트랜잭션 관리자에게 알려주는 연산</li>\n</ul>\n<p><strong>2) Rollback 연산</strong></p>\n<ul>\n<li>트랜잭션 처리가 비정상적으로 종료되었을 때 수행</li>\n<li>트랜잭션의 원자성을 구현하기 위해 트랜잭션이 행한 모든 연산은 취소하는 연산</li>\n</ul>\n<h3 id=\"일관성consistency\" style=\"position:relative;\"><a href=\"#%EC%9D%BC%EA%B4%80%EC%84%B1consistency\" aria-label=\"일관성consistency permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>일관성(Consistency)</h3>\n<blockquote>\n<p>트랜잭션이 성공한 후에도 일관성을 유지해야한다는 것을 의미합니다.\n첫번째로는 트랜잭션이 커밋되면 데이터베이스에 설정한 제약사항을 위반하지 않는다는 뜻인데요. 만약 면담 예약 시간에 유니크 제약조건을 걸었는데, 동일한 시간이 두개가\n생기게 되면 일관성을 해치게 됩니다. 따라서 저장할 수 없어야하는거죠.\n두번째로는 어플리케이션 단에서 의도한대로 정상적으로 동작한다는 의미이기도 해요.  판매할 제품의 재고가 없다면, 판매하지 못하게 막아야한다 정도로 설명드릴 수 있을 것\n같습니다</p>\n</blockquote>\n<p>두번째로는 어플리케이션 단에서 의도한대로 정상적으로 동작한다는 의미이기도 해요.  판매할 제품의 재고가 없다면, 판매하지 못하게 막아야한다 정도로 설명드릴 수 있을 것 같습니다.</p>\n<h3 id=\"독립성isolation\" style=\"position:relative;\"><a href=\"#%EB%8F%85%EB%A6%BD%EC%84%B1isolation\" aria-label=\"독립성isolation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>독립성(Isolation)</h3>\n<blockquote>\n<p>트랜잭션이 실행되고 있을 때, 다른 트랜잭션의 연산 작업이 끼어들지 못하도록 독립적인 행위를 보장하는 것을 의미합니다. 독립성이 잘 지켜지지 않았을 때 동시성 이슈 문제도\n있고, 독립성이 너무 높으면 동시 처리량이 줄어들어 성능 저하가 발생하기도 해요.</p>\n</blockquote>\n<h3 id=\"지속성durability\" style=\"position:relative;\"><a href=\"#%EC%A7%80%EC%86%8D%EC%84%B1durability\" aria-label=\"지속성durability permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>지속성(Durability)</h3>\n<blockquote>\n<p>성공적으로 실행된 트랜잭션은 영구적으로 반영되야하는 것을 의미합니다. 만약에 디비 복제 작업이 계속 진행되다가 갑자기 디비가 올라가 있는 서버가 꺼져 시스템이 다운 됐다면? 다시 처음 부터해야할까요? 이런 문제를 방지하기 위해서 Mysql 에서는 <a href=\"https://sudal.site/undo/\">리두로그</a>라는 것을 사용하여 작업중에 내역을 지속적으로 백업해두기도 합니다!</p>\n</blockquote>\n<h2 id=\"acid-원칙이-무조건-지켜질까\" style=\"position:relative;\"><a href=\"#acid-%EC%9B%90%EC%B9%99%EC%9D%B4-%EB%AC%B4%EC%A1%B0%EA%B1%B4-%EC%A7%80%EC%BC%9C%EC%A7%88%EA%B9%8C\" aria-label=\"acid 원칙이 무조건 지켜질까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ACID 원칙이 무조건 지켜질까?</h2>\n<p>이 원칙을 지키려면 DB 에 접근하는 작업은 무조건 하나일 수밖에 없고 그러면 동시성이 떨어져 성능 저하가 심각하게 발생하게 될 것 같아요. 그렇기 때문에 DB 엔진은 이 원칙을 희생해서 트랜잭션 격리 수준으로 동시성을 조금이나마 얻을 수 있는 방법을 제공합니다.</p>\n<h2 id=\"트랜잭션-격리수준isolation-level\" style=\"position:relative;\"><a href=\"#%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B2%A9%EB%A6%AC%EC%88%98%EC%A4%80isolation-level\" aria-label=\"트랜잭션 격리수준isolation level permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>트랜잭션 격리수준(Isolation level)</h2>\n<p>트랜잭션을 실행하는 중에 다른 트랜잭션의 영향을 받지 않는 독립성을 조금은 덜 지키더라도 동시성을 챙기기 위한 것인데요. ANSI/ISO SQL 표준으로 4개를 정의하고 있습니다.</p>\n<h3 id=\"read-uncommitted---커밋되지-않은-읽기\" style=\"position:relative;\"><a href=\"#read-uncommitted---%EC%BB%A4%EB%B0%8B%EB%90%98%EC%A7%80-%EC%95%8A%EC%9D%80-%EC%9D%BD%EA%B8%B0\" aria-label=\"read uncommitted   커밋되지 않은 읽기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>READ UNCOMMITTED - 커밋되지 않은 읽기</h3>\n<p>트랜잭션이 두개 있다고 가정하면, 첫번째 트랜잭션에서 데이터 변경을 진행중일 떄, 그 데이터를 가지고 다른 트랜잭션에서 읽어와 작업을 할 수 있다는 것을 의미하는데요.</p>\n<ul>\n<li>A-트랜잭션 작업중</li>\n<li>B-트랜잭션 A 작업 내역 읽어와서 작업시작</li>\n<li>A-트랜잭션 문제 생겨 <code class=\"language-text\">롤백</code></li>\n<li>B-트랜잭션은 성공되어 저장</li>\n</ul>\n<p>만약에 리드 언 커밋 상태일 때 면담 신청을 한다고 가정해보면, 누군가 면담을 신청해서 1)시간이 사용중으로 변하고 2)면담 내역 저장 작업을 하다가 다른 누군가가 같은 내용으로 면담을 신청했다고 합시다! 그러면 그 시간을 읽어올테고, 시간이 사용중이기 때문에 면담을 신청하지 못한다는 예외를 던지겠죠?</p>\n<p>그런데 이때 첫번째 면담 신청 내역에 문제가 있어서 첫번째 내역이 전체 롤백이 되었어요. 그러면 두번째 면담 신청은 사실 가능한 상황인데 못하게 되는 문제가 발생합니다 ㅜㅜ</p>\n<p>이렇게 커밋되지 않은 데이터를 볼 수 있는 현상을 <strong>더티 리드(dirty read)</strong> 라고 합니다. 이렇게 되면 데이터 정합성이 맞지 않을 수 있고, 프로그램에 많은 혼란을 야기하기 떄문에 권장되지 않는 격리 레벨입니다.</p>\n<h3 id=\"read-committed---커밋된-읽기\" style=\"position:relative;\"><a href=\"#read-committed---%EC%BB%A4%EB%B0%8B%EB%90%9C-%EC%9D%BD%EA%B8%B0\" aria-label=\"read committed   커밋된 읽기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>READ COMMITTED - 커밋된 읽기</h3>\n<p>커밋된 내역만 다른 트랜잭션에 보여지는 것을 의미합니다.  작업중에 해당 데이터가 필요하다면 레코드를 읽는게 아니라 언두로그에 백업된 데이터를 읽어 일관된 읽기를 보장합니다.  작업이 끝나면 다시 레코드를 읽을 수 있습니다.</p>\n<p>이 읽기도 문제가 하나 있는데요.  아래 상황을 통해 설명하도록 하겠습니다</p>\n<ul>\n<li>\n<p>A- 트랜잭션  2:00시에 면담 생성 작업 시작</p>\n</li>\n<li>\n<p>B- 트랜잭션 2시에 면담 잡힌거 조회\nselect * from interview where interview_time = 2:00; - 언두로그 읽어서 5개 조회</p>\n</li>\n<li>\n<p>A- 트랜잭션  면담 생성 완료</p>\n</li>\n<li>\n<p>B- 트랜잭션 2시에 면담 잡힌거 조회 → 6개 조회</p>\n</li>\n</ul>\n<p>이렇게 한 트랜잭션에서  다른 결과를 읽어드리는 것을  <strong>NON-REPEATABLE READ 라고 합니다.</strong>  하나의 트랜잭션내에서 <strong>동일한 SELECT 쿼리를 실행했을 때 항상 같은 결과를 보장해야 한다는 정합성에 어긋나는 상황입니다. (단일 상황으로 가정하고 이해하시면 좋을 것 같습니다.)</strong></p>\n<h3 id=\"repeatable-read---반복-읽기\" style=\"position:relative;\"><a href=\"#repeatable-read---%EB%B0%98%EB%B3%B5-%EC%9D%BD%EA%B8%B0\" aria-label=\"repeatable read   반복 읽기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>REPEATABLE READ - 반복 읽기</h3>\n<p>MySQL 의 InnoDB 스토리지 엔진에서 기본으로 사용되는 격리 수준입니다. DML로 데이터가 변경되기 전에 이전 데이터를 언두로그에 백업해두고 실제 레코드 값을 변경합니다. 이러한 변경 방식을 MVCC 라고 합니다.</p>\n<blockquote>\n<p><strong>MVCC(Multi Version Concurrency Control) - 잠금을 사용하지 않는 일관된 읽기를 제공</strong>\n<strong>MVCC</strong>는 다중 버전 병행수행 제어의 약자로 DBMS에서는 쓰기(Write) 세션이 읽기(Read) 세션을 블로킹하지 않고, 읽기 세션이 쓰기 세션을 블로킹하지 않게 서로\n다른 세션이 동일한 데이터에 접근했을 때 각 세션마다 스냅샷 이미지를 보장**해주는 메커니즘이는 RDBMS에서 <strong>동시성을 높이기 위해 등장</strong>한 기술입니다. MySQL 에서는 > 언두로그가 MVCC 인거죠!</p>\n</blockquote>\n<h3 id=\"일관된-읽기와-반복-읽기의-차이는-뭘까\" style=\"position:relative;\"><a href=\"#%EC%9D%BC%EA%B4%80%EB%90%9C-%EC%9D%BD%EA%B8%B0%EC%99%80-%EB%B0%98%EB%B3%B5-%EC%9D%BD%EA%B8%B0%EC%9D%98-%EC%B0%A8%EC%9D%B4%EB%8A%94-%EB%AD%98%EA%B9%8C\" aria-label=\"일관된 읽기와 반복 읽기의 차이는 뭘까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>일관된 읽기와 반복 읽기의 차이는 뭘까?</h3>\n<p>언두 영역에 백업된 레코드의 여러 버전 가운데 몇 번째 이전 버전까지 찾아 들어가야하느냐에 차이가 있어요. 모든 트랜잭션은 고유한 트랜잭션 번호와 순서를 가지고 있고, 언두 영역에 백업된 모든 레코드에는 변경을 발생시킨 트랜잭션의 번호가 포함되어 있습니다.  따라서 일관된 읽기는 트랜잭션이 사용한 데이터가 사용중일 때는 언두를 읽지만, 사용이 완료되면 레코드를 읽게 되고, 반복 읽기에 경우는 한번 언두로그를 읽었으면 해당 트랜잭션이 종료될 때까지 그 언두로그에 있는 데이터를 읽게 됩니다. 그래서 서비스가 종료될 때 까지 같은 데이터를 읽을 수 있게 보장하는거죠! 하나의 레코드에는 여러개의 언두(백업)가 존재할 수 있어요.</p>\n<p>여기서 문제는 언두로그에는 락을 걸 수 없다는 것인데요. 만약에 Select for update(조회 후 수정) 를 위해서 데이터 락을 걸고 싶다면 언두가 아닌 레코드를 읽어내야합니다. 레코드는 다른 트랜잭션도 변경할 수 있기 때문에 일관된 읽기를 보장할 수 없게되는거죠.</p>\n<p>그래서 조건절로 점수가 80점 이상인 사람을 조회하고, 그 사람의 레벨을 2로 올리고 싶을 때 조회와 변경이 함께 일어날 거니까 그 데이터를 락 걸고 조회하게 된다면? 그 전에 누군가 점수가 80점 인 사람에 데이터를 추가하는 등 변경이 일어나면 조회 갯수가 3개에서 4개로 바뀐다던지, 같은 내용의 데이터를 읽을 수 없게 되는 거죠. 이런 현상을 PHANTOM READ(팬텀 리드)라고 합니다. (다중 결과를 조회하는 상황이라고 이해하시면 좋을 것 같습니다)</p>\n<p>mysql innoDB 에서는 데이터를 변경할 때 넥스트 키락을 걸어 조회된 데이터 중간에 어떤 삽입이 일어나는 것을 방지하기 때문에 팬텀리드가 발생하지 않습니다!</p>\n<h2 id=\"serializable---읽기-불가능-직렬화\" style=\"position:relative;\"><a href=\"#serializable---%EC%9D%BD%EA%B8%B0-%EB%B6%88%EA%B0%80%EB%8A%A5-%EC%A7%81%EB%A0%AC%ED%99%94\" aria-label=\"serializable   읽기 불가능 직렬화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SERIALIZABLE - 읽기 불가능 (직렬화)</h2>\n<p>가장 엄격한 격리 수준입니다.  InnoDB 엔진에서는 기본적으로 순수한 작업은 아무런 레코드 잠금도 설정하지 않고 실행되는데요. 해당 수준으로 격리 레벨을 올리면 읽기 중에도 다른 트랜잭션은 그 데이터에 접근할 수 없게 됩니다.  mysql 을 사용한다면 REPEATABLE READ 만으로도 충분히 안정성 있는 프로그램이 운영이 가능하기 때문에 가급적이면 SERIALIZABLE 은 지양하는 것이 좋을것 같다고 생각됩니다.</p>\n<h2 id=\"느낀점\" style=\"position:relative;\"><a href=\"#%EB%8A%90%EB%82%80%EC%A0%90\" aria-label=\"느낀점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>느낀점</h2>\n<p>프로젝트를 하면서 동시성 이슈가 발생해서 무턱대고 SERIALIZABLE 로 격리 레벨을 올리며 해결하려고 했던 적도 있었어요. 지금 생각해보면 엄청난 성능 저하가 발생 했을 것 같아요 ㅋㅋ 동시에 데이터를 처리하기 위한 여러 고민들을 하다보니 트랜잭션을 공부하게 되었는데, 안정성있는 프로그램을 운영하는 개발자가 되기 위해서는 필수적으로 알아야하는 내용이라고 생각되면서 이 마음을 가지고 다음에 할 프로젝트에서 트랜잭션에 대해 깊이있게 고민하고 작업해보면 좋겠다고 생각되었습니다.</p>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<ul>\n<li>Real MySQL 8.0  5장</li>\n</ul>","frontmatter":{"date":"December 13, 2022","title":"트랜잭션이란?","categories":"db","author":"수달","emoji":"🙂"},"fields":{"slug":"/mysql/"}},"prev":{"id":"e71a303f-3520-5029-a3fa-4840d569e124","html":"<blockquote>\n<p>해당 글은 Stream 에 대해 알고 있다는 가정하에 작성되었습니다.</p>\n</blockquote>\n<h2 id=\"학습-동기\" style=\"position:relative;\"><a href=\"#%ED%95%99%EC%8A%B5-%EB%8F%99%EA%B8%B0\" aria-label=\"학습 동기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>학습 동기</h2>\n<p>프로그래머스에서 <a href=\"https://school.programmers.co.kr/learn/courses/30/lessons/42578\">위장</a> 이라는 문제를 풀다가 모든 경우의 수를 찾아보는데 조합으로 풀면 간단하겠다고 생각이 들었고, 조합을 풀면서 재귀나 반복으로 풀기보다 Java Stream 에서 제공하는 기능으로 문제를 풀어보면 좋겠다고 생각되었습니다. 해당 글은 Stream 에 대해 알고 있다는 가정하에 작성되었습니다.</p>\n<h2 id=\"reduce-란\" style=\"position:relative;\"><a href=\"#reduce-%EB%9E%80\" aria-label=\"reduce 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reduce() 란?</h2>\n<p>반복된 패턴을 추상화 할 수 있는 강력한 기능입니다. 스트림의 특성상  for 문처럼 원소들이 하나씩 아래로 들어오게 되는데요.  <code class=\"language-text\">reduce()</code>는 스트림의 원소들을 하나씩 소모해가며, 누적 계산을 수행하고 결과값을 리턴하는 메서드 입니다.</p>\n<p><code class=\"language-text\">reduce()</code>는 파라미터를 3개 받을 수 있어요.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">T identity</code>: 계산에 적용할 초깃값으로, 스트림이 비어 있더라도 초깃값을 반환</p>\n<p>만약에 값을 누적하면서 곱하고 싶다면 기본 값이 1이어야 하겠죠?</p>\n</li>\n<li>\n<p><code class=\"language-text\">BinaryOperator&lt;T> accumulator</code>: 적용할 계산 함수</p>\n<p>더하거나, 곱하거나, 빼거나 이런 연산을 수행해요.</p>\n</li>\n<li>\n<p><code class=\"language-text\">BinaryOperator&lt;U> combiner</code>: 병렬 스트림에서 각 쓰레드 계산 결과를 합치는 함수</p>\n<p><code class=\"language-text\">accumulator</code> 를 통해 나온 값을 누적해요.</p>\n</li>\n</ul>\n<h2 id=\"문제-상황\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\" aria-label=\"문제 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 상황</h2>\n<p>스파이가 위장을 하기 위해서 <code class=\"language-text\">모자</code>(비니, 나이키 엘로우 캡),  <code class=\"language-text\">아우터</code>(가죽자켓, 후드티), <code class=\"language-text\">양말</code>(빨간색, 파란색, 노란색) 이 있다고 할 때, 하루에 각 종류별로 1개 이상 착용해야하고, 동일한 종류의 의류를 착용할 수 없다는 제약 조건이 있었어요. 그래서 모든 경우의 수를 찾아야 했어요.</p>\n<ul>\n<li>\n<p>만약에 옷의 종류가 1개라고 해본다면  총 a가지의 경우가 있겠죠?</p>\n</li>\n<li>\n<p>종류가 2개가 되고 각각의 옷의 개수는 a, b개입니다</p>\n<p>그럼 경우의 수는 a, b, ab가 되므로 조합의 개수는 (a+b) + (ab)가지입니다.</p>\n</li>\n<li>\n<p>3개가 된다면? (a+b+c) + (ab+bc+ca) + (abc)가지입니다.</p>\n</li>\n</ul>\n<p>이런 문제 풀이는 다항식을 적용해볼 수 있어요.</p>\n<p>(x+a)(x+b)(x+c) = x3 + (a+b+c)x2 + (ab+bc+ca)x + (abc)라는 식을 도출할 수 있습니다.</p>\n<p>해당 식의 계수의 합을 구하려면 x=1을 대입해주면 됩니다. 그 후 맨 앞 x3 의 계수는 정답에 포함되지 않으므로 마지막에 1을 빼주면 됩니다. .x=1을 대입한 식은 <code class=\"language-text\">(1+a)(1+b)(1+c)</code>가 되고 그 값에 1을 빼면 모든 경우의 수가 나오게 됩니다!</p>\n<h3 id=\"사용한-reduce-2개-파라미터-메서드\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%ED%95%9C-reduce-2%EA%B0%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EB%A9%94%EC%84%9C%EB%93%9C\" aria-label=\"사용한 reduce 2개 파라미터 메서드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용한 reduce 2개 파라미터 메서드</h3>\n<h3 id=\"code-classlanguage-textt-reducet-identity-binaryoperatorltt-accumulatorcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textt-reducet-identity-binaryoperatorltt-accumulatorcode\" aria-label=\"code classlanguage textt reducet identity binaryoperatorltt accumulatorcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">T reduce(T identity, BinaryOperator&lt;T> accumulator)</code></h3>\n<p>결과의 초깃값을 <code class=\"language-text\">identity</code>로 설정한 후, 스트림의 모든 <code class=\"language-text\">element</code>를 차례로 돌면서 <code class=\"language-text\">accumulator</code>를 적용하며 <code class=\"language-text\">result</code>를 갱신합니다. .스트림이 비어 있어도 초깃값인 <code class=\"language-text\">identity</code>를 반환합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">T</span> result <span class=\"token operator\">=</span> identity<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> element <span class=\"token operator\">:</span> <span class=\"token keyword\">this</span> stream<span class=\"token punctuation\">)</span>\n    result <span class=\"token operator\">=</span> accumulator<span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> element<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span></code></pre></div>\n<p>사용 예시는 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">int</span> result <span class=\"token operator\">=</span> <span class=\"token class-name\">IntStream</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> a<span class=\"token operator\">*</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 결과값은 60 이다. </span></code></pre></div>\n<h2 id=\"hashmap-과-조합을-사용할-때는\" style=\"position:relative;\"><a href=\"#hashmap-%EA%B3%BC-%EC%A1%B0%ED%95%A9%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C%EB%8A%94\" aria-label=\"hashmap 과 조합을 사용할 때는 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HashMap 과 조합을 사용할 때는?</h2>\n<p>주어진 데이터가 String, 문자열 배열 이더라도,  key 값에는 고유 값을 두고,  value 에  배열의 개수를 두면 조합을 통해서 값을 계산하기 한결 수월해집니다!</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">solution</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> clothes<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 문자열 배열로 주어진 데이터</span>\n\t\t<span class=\"token punctuation\">.</span>\n\t\t<span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> total <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> clothes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\ttotal<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>clothes<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> total<span class=\"token punctuation\">.</span><span class=\"token function\">getOrDefault</span><span class=\"token punctuation\">(</span>clothes<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">final</span> <span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">></span></span> values <span class=\"token operator\">=</span> total<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">int</span> answer <span class=\"token operator\">=</span> values<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> a<span class=\"token operator\">*</span>b<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> answer<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"date":"December 14, 2022","title":"Stream의 reduce() 로 조합 계산하기","categories":"java","author":"수달","emoji":"🙂"},"fields":{"slug":"/java7/"}},"site":{"siteMetadata":{"siteUrl":"https://her0807.com","comments":{"utterances":{"repo":"https://github.com/her0807/her0807.github.io"}}}}},"pageContext":{"slug":"/java/","nextSlug":"/mysql/","prevSlug":"/java7/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}